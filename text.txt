<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D West Chester Metaverse Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>body{margin:0;} canvas{display:block;}</style>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
<script>
// Scene setup
var scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);
var camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,120,0); camera.lookAt(0,0,0);
var renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Controls
var controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableRotate = false; controls.enablePan = true; controls.enableZoom = true;

// Lights
var light = new THREE.DirectionalLight(0xffffff,1); light.position.set(100,100,100); scene.add(light);
scene.add(new THREE.AmbientLight(0x404040));

// Ground plane
var planeGeometry = new THREE.PlaneGeometry(200,200);
var planeMaterial = new THREE.MeshPhongMaterial({color:0x228B22});
var plane = new THREE.Mesh(planeGeometry, planeMaterial);
plane.rotation.x = -Math.PI/2;
scene.add(plane);

// Map Lat/Lon to X/Z
var latMin=39.85, latMax=40.05, lonMin=-75.75, lonMax=-75.55;
function mapLatLonToXZ(lat,lon){var x=((lon-lonMin)/(lonMax-lonMin)-0.5)*200; var z=((lat-latMin)/(latMax-latMin)-0.5)*200; return {x:x,z:z};}

// Business data
var businessData=[
{"Business":"La Chic Boutique","Lat":39.9605,"Lon":-75.6051,"Phone":"(610) 255-2145","Email":"info@lachicbtq.com"},
{"Business":"Tish Boutique","Lat":39.9609,"Lon":-75.6042,"Phone":"(610) 222-6101","Email":"info@tishstyle.com"},
{"Business":"Boutique Bella","Lat":39.9612,"Lon":-75.6071,"Phone":"(610) 555-1234","Email":"bella@example.com"},
{"Business":"Chester Flowers","Lat":39.9620,"Lon":-75.6060,"Phone":"(610) 555-2345","Email":"info@chesterflowers.com"},
{"Business":"West Chester Cafe","Lat":39.9595,"Lon":-75.6035,"Phone":"(610) 555-3456","Email":"contact@wccafe.com"},
{"Business":"Urban Threads","Lat":39.9580,"Lon":-75.6055,"Phone":"(610) 555-4567","Email":"info@urbanthreads.com"},
{"Business":"Artisan Bread","Lat":39.9575,"Lon":-75.6040,"Phone":"(610) 555-5678","Email":"bread@artisan.com"},
{"Business":"Chester Yoga","Lat":39.9565,"Lon":-75.6025,"Phone":"(610) 555-6789","Email":"info@chesteryoga.com"},
{"Business":"Bella Nails","Lat":39.9555,"Lon":-75.6015,"Phone":"(610) 555-7890","Email":"bella@beauty.com"},
{"Business":"Tech Hub","Lat":39.9545,"Lon":-75.6005,"Phone":"(610) 555-8901","Email":"contact@techhub.com"},
{"Business":"Green Market","Lat":39.9535,"Lon":-75.5995,"Phone":"(610) 555-9012","Email":"green@market.com"},
{"Business":"Vintage Vinyl","Lat":39.9525,"Lon":-75.5985,"Phone":"(610) 555-0123","Email":"info@vinyl.com"},
{"Business":"Coffee Corner","Lat":39.9515,"Lon":-75.5975,"Phone":"(610) 555-1235","Email":"corner@coffee.com"},
{"Business":"Book Nook","Lat":39.9505,"Lon":-75.5965,"Phone":"(610) 555-2346","Email":"info@booknook.com"},
{"Business":"Chester Gym","Lat":39.9495,"Lon":-75.5955,"Phone":"(610) 555-3457","Email":"contact@chestergym.com"},
{"Business":"Fresh Fruits","Lat":39.9485,"Lon":-75.5945,"Phone":"(610) 555-4568","Email":"fresh@fruits.com"},
{"Business":"Pet Pals","Lat":39.9475,"Lon":-75.5935,"Phone":"(610) 555-5679","Email":"info@petpals.com"},
{"Business":"The Bake Shop","Lat":39.9465,"Lon":-75.5925,"Phone":"(610) 555-6780","Email":"bakeshop@example.com"},
{"Business":"Chester Bikes","Lat":39.9455,"Lon":-75.5915,"Phone":"(610) 555-7891","Email":"info@chesterbikes.com"},
{"Business":"Flower Power","Lat":39.9445,"Lon":-75.5905,"Phone":"(610) 555-8902","Email":"flower@power.com"},
{"Business":"Cafe Delight","Lat":39.9435,"Lon":-75.5895,"Phone":"(610) 555-9013","Email":"delight@cafe.com"},
{"Business":"Urban Art","Lat":39.9425,"Lon":-75.5885,"Phone":"(610) 555-0124","Email":"urban@art.com"},
{"Business":"Chester Music","Lat":39.9415,"Lon":-75.5875,"Phone":"(610) 555-1236","Email":"info@chestermusic.com"},
{"Business":"Yoga Studio","Lat":39.9405,"Lon":-75.5865,"Phone":"(610) 555-2347","Email":"contact@yogastudio.com"},
{"Business":"Gourmet Cheese","Lat":39.9395,"Lon":-75.5855,"Phone":"(610) 555-3458","Email":"info@gourmetcheese.com"},
{"Business":"Vintage Threads","Lat":39.9385,"Lon":-75.5845,"Phone":"(610) 555-4569","Email":"vintage@threads.com"},
{"Business":"The Bookstore","Lat":39.9375,"Lon":-75.5835,"Phone":"(610) 555-5670","Email":"books@bookstore.com"},
{"Business":"Chester Spa","Lat":39.9365,"Lon":-75.5825,"Phone":"(610) 555-6781","Email":"spa@chester.com"},
{"Business":"Healthy Bites","Lat":39.9355,"Lon":-75.5815,"Phone":"(610) 555-7892","Email":"info@healthybites.com"},
{"Business":"Tech Solutions","Lat":39.9345,"Lon":-75.5805,"Phone":"(610) 555-8903","Email":"contact@techsolutions.com"}
];

// Add markers
var markers = [];
businessData.forEach(function(d){
  var pos = mapLatLonToXZ(d.Lat,d.Lon);
  var geo = new THREE.CylinderGeometry(0.5,0.5,2,16);
  var mat = new THREE.MeshPhongMaterial({color:0xff0000});
  var marker = new THREE.Mesh(geo, mat);
  marker.position.set(pos.x,1,pos.z);
  marker.userData = d;
  scene.add(marker);
  markers.push(marker);
});

// Clouds
var clouds = [];
for(var i=0;i<50;i++){
  var geo = new THREE.SphereGeometry(2,8,8);
  var mat = new THREE.MeshPhongMaterial({color:0xffffff, transparent:true, opacity:0.7});
  var cloud = new THREE.Mesh(geo, mat);
  cloud.position.set(Math.random()*220-110, 10, Math.random()*220-110);
  scene.add(cloud);
  clouds.push(cloud);
}

// Animate clouds
function animateClouds(){clouds.forEach(function(c){c.position.x+=0.01;if(c.position.x>120)c.position.x=-120;});}

// Animate loop
function animate(){requestAnimationFrame(animate);animateClouds();renderer.render(scene,camera);}
animate();

window.addEventListener('resize',function(){
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>